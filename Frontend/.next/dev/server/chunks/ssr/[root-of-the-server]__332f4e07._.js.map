{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/nishant/SphereHack%201.0/Frontend/pages/monitor/%5Bid%5D.js"],"sourcesContent":["import { useRouter } from \"next/router\"\nimport { useEffect, useState, useRef } from \"react\"\n\nexport default function MonitorPage() {\n    const router = useRouter()\n    const { id } = router.query\n    const [deployment, setDeployment] = useState(null)\n    const logsEndRef = useRef(null)\n\n    useEffect(() => {\n        if (!id) return\n\n        const fetchLogs = async () => {\n            try {\n                const res = await fetch(`http://localhost:3005/api/deployments/${id}`)\n                const data = await res.json()\n                setDeployment(data)\n            } catch (err) {\n                console.error(\"Failed to fetch logs\")\n            }\n        }\n\n        // Poll every 2 seconds\n        const interval = setInterval(fetchLogs, 2000)\n        fetchLogs() // Initial call\n\n        return () => clearInterval(interval)\n    }, [id])\n\n    // Auto-scroll to bottom\n    useEffect(() => {\n        logsEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\n    }, [deployment?.logs])\n\n    if (!deployment) return <div style={styles.container}>Loading deployment data...</div>\n\n    return (\n        <div style={styles.container}>\n            <div style={styles.header}>\n                <h2>Deployment Monitor</h2>\n                <div style={styles.meta}>\n                    <p><strong>Repo:</strong> {deployment.repo}</p>\n                    <p><strong>Platform:</strong> {deployment.platform}</p>\n                    <p>\n                        <strong>Status:</strong>\n                        <span style={{\n                            color: deployment.status === \"ACTIVE\" ? \"green\" : deployment.status === \"FAILED\" ? \"red\" : \"orange\",\n                            fontWeight: \"bold\",\n                            marginLeft: \"6px\"\n                        }}>\n                            {deployment.status}\n                        </span>\n                    </p>\n                </div>\n            </div>\n\n            <div style={styles.terminal}>\n                {deployment.logs.map((log, i) => (\n                    <div key={i} style={styles.logLine}>\n                        <span style={styles.timestamp}>[{new Date().toLocaleTimeString()}]</span> {log}\n                    </div>\n                ))}\n                <div ref={logsEndRef} />\n            </div>\n\n            {deployment.aiAnalysis && (\n                <div style={styles.aiBox}>\n                    <h3>ðŸ¤– AI Ops - Error Analysis</h3>\n                    <p>{deployment.aiAnalysis}</p>\n                    <button style={styles.fixButton} onClick={() => alert(\"Auto-Fix applied! Restarting deployment...\")}>\n                        Auto-Fix & Redeploy\n                    </button>\n                </div>\n            )}\n\n            <button style={styles.backButton} onClick={() => router.push(\"/dashboard\")}>\n                Back to Dashboard\n            </button>\n        </div>\n    )\n}\n\nconst styles = {\n    container: { padding: \"40px\", maxWidth: \"900px\", margin: \"0 auto\", fontFamily: \"monospace\" },\n    header: { marginBottom: \"20px\", borderBottom: \"1px solid #ddd\", paddingBottom: \"10px\" },\n    meta: { display: \"flex\", gap: \"20px\", fontSize: \"16px\" },\n    terminal: {\n        backgroundColor: \"#1e1e1e\",\n        color: \"#00ff00\",\n        padding: \"20px\",\n        borderRadius: \"8px\",\n        height: \"400px\",\n        overflowY: \"auto\",\n        fontFamily: \"Courier New, monospace\",\n        fontSize: \"14px\",\n        boxShadow: \"0 4px 10px rgba(0,0,0,0.3)\"\n    },\n    logLine: { marginBottom: \"4px\" },\n    timestamp: { color: \"#888\", marginRight: \"8px\" },\n    aiBox: {\n        marginTop: \"20px\",\n        padding: \"20px\",\n        backgroundColor: \"#fff0f0\",\n        border: \"1px solid red\",\n        borderRadius: \"8px\",\n        color: \"#d8000c\"\n    },\n    fixButton: {\n        marginTop: \"10px\",\n        padding: \"8px 16px\",\n        backgroundColor: \"#d8000c\",\n        color: \"white\",\n        border: \"none\",\n        borderRadius: \"4px\",\n        cursor: \"pointer\"\n    },\n    backButton: {\n        marginTop: \"20px\",\n        padding: \"10px 20px\",\n        cursor: \"pointer\",\n        backgroundColor: \"#333\",\n        color: \"white\",\n        border: \"none\",\n        borderRadius: \"5px\"\n    }\n}\n"],"names":[],"mappings":"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"}}]
}